import*as THREE from"three";const scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(45,window.innerWidth/window.innerHeight,.1,1e3),Renderer=new THREE.WebGLRenderer({canvas:document.querySelector("#hero")});Renderer.setPixelRatio(window.devicePixelRatio),Renderer.setSize(window.innerWidth,window.innerHeight);const geometry=new THREE.BoxGeometry,material=new THREE.MeshBasicMaterial({color:50108,wireframe:!0}),cube=new THREE.InstancedMesh(geometry,material,1e3);scene.add(cube);const dummy=new THREE.Object3D;for(let e=0;e<1e3;e++)dummy.position.x=40*Math.random()-20,dummy.position.y=40*Math.random()-20,dummy.position.z=40*Math.random()-20,dummy.rotation.x=2*Math.random()*Math.PI,dummy.rotation.y=2*Math.random()*Math.PI,dummy.rotation.z=2*Math.random()*Math.PI,dummy.scale.x=dummy.scale.y=dummy.scale.z=1.65*Math.random(),dummy.updateMatrix(),cube.setMatrixAt(e,dummy.matrix),cube.setColorAt(e,new THREE.Color(50108*Math.random()+3616931*(1-Math.random())));window.addEventListener("resize",(function(){camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),Renderer.setSize(window.innerWidth,window.innerHeight)})),scene.add(camera),Renderer.render(scene,camera);const matrix=new THREE.Matrix4;function animate(e){for(let t=0;t<420;t++)cube.getMatrixAt(t,matrix),matrix.decompose(dummy.position,dummy.rotation,dummy.scale),dummy.rotation.x=t/1e3*e/100,dummy.rotation.y=t/1e3*e/500,dummy.rotation.z=t/1e3*e/1e3,dummy.updateMatrix(),cube.setMatrixAt(t,dummy.matrix);const t=30+1.75*Math.sin(e/2e3);camera.position.z=t,cube.instanceMatrix.needsUpdate=!0,Renderer.render(scene,camera)}Renderer.setAnimationLoop(animate);